 * Tip: There are .env files present. Install python-dotenv to use them.

============================================================
SMART PURCHASE SLIP BACKEND - STARTUP
============================================================
[INFO] Python version: 3.13.5 (main, Jun 25 2025, 18:55:22) [GCC 14.2.0]
[INFO] Platform: linux
[INFO] Frozen: False
[INFO] CWD: /tmp/cc-agent/61361045/project
[INFO] Running in development mode
[INFO] sys.path: ['/tmp/cc-agent/61361045/project', '/tmp/cc-agent/61361045/project/backend', '/usr/lib/python313.zip']...
[INFO] Importing database module...
[INFO] MySQL Connector version: 9.5.0
[INFO] MySQL Connector pure mode: 1
[INFO] Running in development mode from: /tmp/cc-agent/61361045/project/backend
[INFO] Trying config path: /tmp/cc-agent/61361045/project/config.json
[OK] Loaded config from: /tmp/cc-agent/61361045/project/config.json
[INFO] MySQL connection: root@localhost:1396/purchase_slips_db
[OK] Database module imported
[INFO] Importing routes modules...
[INFO] MySQL Connector version: 9.5.0
[INFO] MySQL Connector pure mode: 1
[INFO] Running in development mode from: /tmp/cc-agent/61361045/project/backend
[INFO] Trying config path: /tmp/cc-agent/61361045/project/config.json
[OK] Loaded config from: /tmp/cc-agent/61361045/project/config.json
[INFO] MySQL connection: root@localhost:1396/purchase_slips_db
[WARNING] Centralized PDF service not available: cannot import name 'generate_purchase_slip_pdf' from 'pdf_service' (consider renaming '/tmp/cc-agent/61361045/project/backend/pdf_service.py' if it has the same name as a library you intended to import)
[OK] WhatsApp service loaded successfully
[OK] Centralized PDF service loaded successfully
[OK] WhatsApp service loaded successfully
[OK] Routes modules imported
[INFO] Importing backup service...
[OK] Backup service imported
[INFO] Setting up Flask paths...
[INFO] Creating Flask app...
[INFO] Enabling CORS...
[INFO] Registering blueprints...
[OK] Blueprints registered
[INFO] Initializing database...
[ERROR] Error creating connection pool: 2003: Can't connect to MySQL server on 'localhost:1396' (Errno 111: Connection refused)
[ERROR] Error initializing database: 2003: Can't connect to MySQL server on 'localhost:1396' (Errno 111: Connection refused)
[ERROR] Database initialization failed: 2003: Can't connect to MySQL server on 'localhost:1396' (Errno 111: Connection refused)
[ERROR] Traceback:
Traceback (most recent call last):
  File "/home/appuser/.local/lib/python3.13/site-packages/mysql/connector/network.py", line 795, in open_connection
    self.sock.connect(sockaddr)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^
ConnectionRefusedError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/tmp/cc-agent/61361045/project/backend/app.py", line 92, in <module>
    init_db()
    ~~~~~~~^^
  File "/tmp/cc-agent/61361045/project/backend/database.py", line 154, in init_db
    init_connection_pool()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/tmp/cc-agent/61361045/project/backend/database.py", line 87, in init_connection_pool
    connection_pool = MySQLConnectionPool(
        pool_name="purchase_pool",
    ...<2 lines>...
        **pool_config
    )
  File "/home/appuser/.local/lib/python3.13/site-packages/mysql/connector/pooling.py", line 490, in __init__
    self.add_connection()
    ~~~~~~~~~~~~~~~~~~~^^
  File "/home/appuser/.local/lib/python3.13/site-packages/mysql/connector/pooling.py", line 613, in add_connection
    cnx = connect(**self._cnx_config)  # type: ignore[assignment]
  File "/home/appuser/.local/lib/python3.13/site-packages/mysql/connector/pooling.py", line 323, in connect
    return MySQLConnection(*args, **kwargs)
  File "/home/appuser/.local/lib/python3.13/site-packages/mysql/connector/connection.py", line 185, in __init__
    self.connect(**kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^
  File "/home/appuser/.local/lib/python3.13/site-packages/mysql/connector/abstracts.py", line 1604, in connect
    self._open_connection()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/appuser/.local/lib/python3.13/site-packages/mysql/connector/connection.py", line 411, in _open_connection
    raise err
  File "/home/appuser/.local/lib/python3.13/site-packages/mysql/connector/connection.py", line 382, in _open_connection
    self._socket.open_connection()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/appuser/.local/lib/python3.13/site-packages/mysql/connector/network.py", line 806, in open_connection
    raise InterfaceError(
    ...<2 lines>...
    ) from err
mysql.connector.errors.InterfaceError: 2003: Can't connect to MySQL server on 'localhost:1396' (Errno 111: Connection refused)

[WARNING] Continuing without database - some features may not work
[INFO] Starting automated backup service...
[BACKUP] Scheduler started - backups will run every 24 hours
[BACKUP] Backup directory: /home/appuser/Documents/smart_purchase_slip_backup

[BACKUP] Starting automated backup at 2026-02-01 18:05:52
[BACKUP] Background backup service started
[OK] Automated backup service started

============================================================
RICE MILL PURCHASE SLIP MANAGER
============================================================

[OK] Server starting...
[INFO] Backend running on: http://127.0.0.1:5000

[INFO] Press CTRL+C to stop the server

 * Serving Flask app 'app'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[33mPress CTRL+C to quit[0m
 * Restarting with stat
 * Tip: There are .env files present. Install python-dotenv to use them.
 * Debugger is active!
 * Debugger PIN: 290-423-176
127.0.0.1 - - [01/Feb/2026 18:06:10] "GET /static/js/script.js HTTP/1.1" 200 -
127.0.0.1 - - [01/Feb/2026 18:06:14] "GET /static/js/script.js HTTP/1.1" 200 -
127.0.0.1 - - [01/Feb/2026 18:06:25] "GET /app HTTP/1.1" 200 -
127.0.0.1 - - [01/Feb/2026 18:08:24] "GET /app HTTP/1.1" 200 -
127.0.0.1 - - [01/Feb/2026 18:08:24] "GET /static/js/script.js HTTP/1.1" 200 -
127.0.0.1 - - [01/Feb/2026 18:08:30] "GET /app HTTP/1.1" 200 -
127.0.0.1 - - [01/Feb/2026 18:08:30] "GET /static/js/script.js HTTP/1.1" 200 -
